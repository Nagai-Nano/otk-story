(this["webpackJsonpotk-story"]=this["webpackJsonpotk-story"]||[]).push([[0],{109:function(n,e,t){n.exports=t.p+"static/media/logo.6ad731b9.png"},122:function(n,e,t){n.exports=t(180)},180:function(n,e,t){"use strict";t.r(e);var r=t(0),a=t.n(r),o=t(8),c=t.n(o),i=t(96),l=t(38),u=t(12),d="".concat("/otk-story","/theme"),s={default:localStorage.getItem("APP_THEME")||"light",themeMap:{light:"".concat(d,"/light.theme.css"),dark:"".concat(d,"/dark.theme.css")}},m=function(n){var e=document.createElement("link");return Object.keys(n).forEach((function(t){"onload"===t&&(e.onload=n.onload),e[t]=n[t]})),e},f=function(n){var e=document.head.querySelector("title");document.head.insertBefore(n,e)},p=Object(r.createContext)();var g=function(n){var e=n.children,t=Object(r.useState)("loading"),o=Object(l.a)(t,2),c=o[0],i=o[1],d=Object(r.useState)(null),g=Object(l.a)(d,2),b=g[0],h=g[1];Object(r.useEffect)((function(){Object.keys(s.themeMap).forEach((function(n){var e=m({rel:"prefetch",as:"style",href:s.themeMap[n],id:"".concat(n,"-theme-prefetch")});f(e)}))}),[]),Object(r.useEffect)((function(){v(s.default)}),[]),Object(r.useEffect)((function(){"loading"===c?(document.body.classList.remove("theme-loaded"),document.body.classList.add("theme-loading")):(document.body.classList.remove("theme-loading"),document.body.classList.add("theme-loaded"))}),[c]);var v=function(n){if(n!==b){var e=document.getElementById("current-theme");e&&e.remove(),i("loading");var t=m({type:"text/css",rel:"stylesheet",id:"current-theme",href:s.themeMap[n],onload:function(){return i("loaded")}});localStorage.setItem("APP_THEME",n),f(t),h(n)}};return a.a.createElement(p.Provider,{value:{status:c,themes:Object.keys(s.themeMap).reduce((function(n,e){return n[e]=e,n}),{}),currentTheme:b,switchTheme:v}},a.a.createElement(u.a,{theme:{mode:b}},e))},b=t(46),h=t(34),v=t.n(h),E=Object(r.createContext)(),x={date:v()(),loading:!1,error:!1,stories:[],story:[],currentImage:{}};function y(n,e){var t=e.type,r=e.payload;switch(t){case"DATE_CHANGE":return Object(b.a)({},n,{date:r});case"FETCHING":return Object(b.a)({},n,{loading:!0,error:!1});case"SET_STORIES":return Object(b.a)({},n,{loading:!1,stories:r});case"FETCH_FAILED":return Object(b.a)({},n,{loading:!1,error:!0});case"ADD_STORY":var a=n.stories.find((function(n){return n.date===r.date})).story,o=a.findIndex((function(n){return n.Id===r.id}));return Object(b.a)({},n,{story:a,currentImage:Object(b.a)({},a[o],{idx:o,isFirstImage:0===o,isLastImage:o===a.length-1})});case"REMOVE_STORY":return Object(b.a)({},n,{story:[],currentImage:{}});case"CHANGE_CURRENT_IMAGE":var c=n.currentImage.idx+r;return Object(b.a)({},n,{currentImage:Object(b.a)({},n.story[c],{idx:c,isFirstImage:0===c,isLastImage:c===n.story.length-1})});default:return n}}function k(){return Object(r.useContext)(E)}var O=function(n){var e=n.children,t=Object(r.useReducer)(y,x),o=Object(l.a)(t,2),c=o[0],i=o[1];return a.a.createElement(E.Provider,{value:{state:c,dispatch:i}},e)},j=t(15);function w(){var n=Object(j.a)(["\n    body {\n      font-family: 'IBM Plex Sans', sans-serif;\n      background: ",";\n      color: ",";\n      transition: opacity 0.2s;\n\n      &.theme-loading {\n        display: none;\n      }\n      &.theme-loaded {\n        display: block;\n      }\n    }\n  "]);return w=function(){return n},n}function C(){var n=Object(j.a)(["\n  ","\n\n  .ant-back-top {\n    right: 30px;\n    bottom: 30px;\n  }\n\n  .ant-back-top-icon {\n    font-size: 20px;\n  }\n\n  .ant-modal-mask {\n    background-color: rgba(0,0,0,.7);\n  }\n\n  .ant-modal-body {\n    padding: 0;\n  }\n\n  .ant-modal-body > div:not(.loaded) {\n    height: 45rem;\n  }\n\n  ::-webkit-scrollbar {\n    width: 11px;\n    height: 10px;\n    background: transparent;\n  }\n\n  ::-webkit-scrollbar-button {\n    width: 0;\n    height: 0;\n    display: none;\n  }\n\n  ::-webkit-scrollbar-corner {\n    background: transparent;\n  }\n\n  ::-webkit-scrollbar-thumb {\n    height: 6px;\n    border: 2px solid transparent;\n    background-clip: padding-box;\n    border-radius: 7px;\n    background-color: ",";\n  }\n"]);return C=function(){return n},n}var I=Object(u.b)(C(),(function(n){var e=n.theme;return Object(u.c)(w(),"dark"===e.mode?"#18191a":"#eef0f1","dark"===e.mode?"#ffffff":"#000000")}),(function(n){return"dark"===n.theme.mode?"rgba(255, 255, 255, 0.6)":"rgba(0,0,0,.2)"})),N=t(189),T=t(181);function S(){var n=Object(j.a)(["\n  padding: 1rem 50px;\n  font-size: 1rem;\n  letter-spacing: 0.5px;\n\n  a:hover {\n    text-decoration: underline;\n  }\n"]);return S=function(){return n},n}function _(){var n=Object(j.a)(["\n  padding: 0 50px;\n  margin-top: 50px;\n  flex-grow: 1;\n"]);return _=function(){return n},n}function A(){var n=Object(j.a)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  overflow: hidden;\n\n  .logo {\n    width: 170px;\n\n    img {\n      width: 100%;\n      margin-bottom: 4px;\n    }\n  }\n\n  ul {\n    display: flex;\n    justify-content: flex-end;\n    border-bottom: none;\n    background: transparent;\n  }\n\n  .menu-icon {\n    margin-top: 8px !important;\n\n    span {\n      font-size: 1.5rem;\n    }\n  }\n\n  .ant-menu-item-active,\n  .ant-menu-item-selected,\n  .ant-menu-submenu,\n  .ant-menu-item {\n    border-bottom: none !important;\n    background: transparent;\n  }\n\n  @media (max-width: 575.98px) {\n    .ant-menu-item {\n      margin-left: 5px !important;\n    }\n  }\n"]);return A=function(){return n},n}function M(){var n=Object(j.a)(["\n  display: flex;\n  flex-direction: column;\n  min-height: 100vh;\n"]);return M=function(){return n},n}var Y=Object(u.d)(T.a)(M()),z=Object(u.d)(T.a.Header)(A()),R=Object(u.d)(T.a.Content)(_()),D=Object(u.d)(T.a.Footer)(S()),F=t(185),L=t(190),Z=t(191),H=t(109),P=t.n(H);var G=function(){var n=Object(r.useContext)(p),e=n.currentTheme,t=n.switchTheme;return a.a.createElement(z,null,a.a.createElement("a",{href:"/",className:"logo"},a.a.createElement("img",{src:P.a,alt:"logo"})),a.a.createElement(F.a,{mode:"horizontal",selectedKeys:[]},a.a.createElement(F.a.Item,{key:"1",className:"light"===e?"menu-icon ant-menu-item-selected":"menu-icon",onClick:function(){t("light"===e?"dark":"light")}},a.a.createElement(L.a,null)),a.a.createElement(F.a.Item,{className:"menu-icon",style:{marginRight:0},onClick:function(){return[window.open("https://github.com/Nagai-Nano/otk-story","_blank")]}},a.a.createElement(Z.a,null))))};var U=function(n){var e=n.children;return a.a.createElement(R,null,e)};var X=function(){return a.a.createElement(D,null,"Created by"," ",a.a.createElement("a",{href:"https://www.facebook.com/Nanoooooooooooooooooooooooooooooooooooooooooooooox",target:"_blank",rel:"noopener noreferrer"},"Nano")," ","\u2764\ufe0f"," ",a.a.createElement("a",{href:"https://github.com/Nagai-Nano/otk-story",target:"_blank",rel:"noopener noreferrer"},"Otk-story"))},B=t(182),q=t(56),J=t(192),K=t(193);function V(){var n=Object(j.a)(["\n  display: flex;\n  justify-content: flex-end;\n\n  button {\n    margin-left: 6px;\n\n    span {\n      font-size: 15px !important;\n    }\n  }\n\n  .ant-picker {\n    width: 16rem;\n\n    @media (max-width: 767.98px) {\n      flex-grow: 1;\n    }\n  }\n"]);return V=function(){return n},n}var Q=u.d.div(V());var W=function(){var n=Object(r.useState)(v()()),e=Object(l.a)(n,2),t=e[0],o=e[1],c=k(),i=c.state,u=c.dispatch,d=function(n){return function(){var e=t.clone().add(n,"days");s(e)}},s=function(n){o(n),u({type:"DATE_CHANGE",payload:n})};return a.a.createElement(Q,null,a.a.createElement(B.a,{size:"large",value:t,format:"DD/MM/YYYY",allowClear:!1,onChange:s,disabled:i.loading}),a.a.createElement(q.a,{size:"large",icon:a.a.createElement(J.a,null),loading:i.loading,disabled:i.loading,onClick:d(-7)}),a.a.createElement(q.a,{size:"large",icon:a.a.createElement(K.a,null),loading:i.loading,disabled:i.loading,onClick:d(7)}))},$=t(73),nn=t.n($),en=t(94),tn=t(188);function rn(){var n=Object(j.a)(["\n  margin-top: 25px;\n"]);return rn=function(){return n},n}var an=u.d.div(rn());function on(){var n=Object(j.a)(["\n  position: relative;\n  display: block;\n  height: 100%;\n  width: 100%;\n\n  .line {\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    border-radius: 50%;\n    animation-duration: 1s;\n    border-left-width: calc(60px / 25);\n    border-top-width: calc(60px / 25);\n    border-left-color: #13c2c2;\n    border-left-style: solid;\n    border-top-style: solid;\n    border-top-color: transparent;\n\n    &:nth-child(1) {\n      animation: "," 1s linear infinite;\n      transform: rotateZ(120deg) rotateX(66deg) rotateZ(0deg);\n    }\n\n    &:nth-child(2) {\n      animation: "," 1s linear infinite;\n      transform: rotateZ(240deg) rotateX(66deg) rotateZ(0deg);\n    }\n\n    &:nth-child(3) {\n      animation: "," 1s linear infinite;\n      transform: rotateZ(360deg) rotateX(66deg) rotateZ(0deg);\n    }\n  }\n\n  .circle {\n    display: block;\n    position: absolute;\n    color: #13c2c2;\n    font-size: calc(60px * 0.24);\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n  }\n"]);return on=function(){return n},n}function cn(){var n=Object(j.a)(["\n  height: 60px;\n  width: 60px;\n  overflow: hidden;\n"]);return cn=function(){return n},n}function ln(){var n=Object(j.a)(["\n  width: 100%;\n  height: 50vh;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n"]);return ln=function(){return n},n}function un(){var n=Object(j.a)(["\n  100% {\n    transform: rotateZ(360deg) rotateX(66deg) rotateZ(360deg);\n  }\n"]);return un=function(){return n},n}function dn(){var n=Object(j.a)(["\n  100% {\n    transform: rotateZ(240deg) rotateX(66deg) rotateZ(360deg);\n  }\n"]);return dn=function(){return n},n}function sn(){var n=Object(j.a)(["\n  100% {\n    transform: rotateZ(120deg) rotateX(66deg) rotateZ(360deg);\n  }\n"]);return sn=function(){return n},n}var mn=Object(u.e)(sn()),fn=Object(u.e)(dn()),pn=Object(u.e)(un()),gn=u.d.div(ln()),bn=u.d.div(cn()),hn=u.d.div(on(),mn,fn,pn);var vn=function(){return a.a.createElement(gn,null,a.a.createElement(bn,null,a.a.createElement(hn,null,a.a.createElement("div",{className:"line"}),a.a.createElement("div",{className:"line"}),a.a.createElement("div",{className:"line"}),a.a.createElement("div",{className:"circle"},"\u25cf"))))},En=t(195),xn=t(196),yn=t(197),kn=t(186),On=t(183);function jn(){var n=Object(j.a)(["\n  grid-column: 1/-1;\n  text-align: center;\n  font-size: 1.2rem;\n  text-transform: uppercase;\n  color: ",";\n  padding: 1rem;\n  letter-spacing: 1px;\n"]);return jn=function(){return n},n}function wn(){var n=Object(j.a)(["\n  border-radius: 4px;\n  background: transparent;\n  border-color: ",";\n  overflow: hidden;\n\n  &:hover .ant-card-cover img {\n    transform: scale(1.05);\n  }\n\n  .ant-card-body {\n    display: none;\n  }\n\n  .ant-card-cover {\n    height: 22rem;\n    overflow: hidden;\n  }\n\n  .ant-card-actions {\n    border-radius: 4px;\n    border-top: 0;\n    background: ",";\n\n    .anticon {\n      opacity: 1;\n      color: ",";\n\n      &:hover {\n        color: #13c2c2;\n      }\n    }\n\n    li:not(:last-child) {\n      border-right-color: ",";\n    }\n  }\n"]);return wn=function(){return n},n}function Cn(){var n=Object(j.a)(["\n  font-size: 1.4rem;\n  font-weight: 500;\n  letter-spacing: 1px;\n  margin-left: 7px;\n"]);return Cn=function(){return n},n}function In(){var n=Object(j.a)(["\n  margin-bottom: 25px;\n  border-radius: 4px;\n  box-shadow: 0 0 0 1px\n    ",";\n  border: none;\n\n  .ant-collapse-item,\n  .ant-collapse-header {\n    border-radius: 4px !important;\n    border-bottom: 0;\n  }\n\n  .ant-collapse-content {\n    border-top-color: ",";\n  }\n\n  .ant-collapse-content-box {\n    display: grid;\n    grid-template-columns: repeat(6, 1fr);\n    grid-gap: 1rem;\n\n    @media (max-width: 1499.98px) {\n      grid-template-columns: repeat(5, 1fr);\n    }\n\n    @media (max-width: 1199.98px) {\n      grid-template-columns: repeat(4, 1fr);\n    }\n\n    @media (max-width: 991.98px) {\n      grid-template-columns: repeat(3, 1fr);\n    }\n\n    @media (max-width: 767.98px) {\n      grid-template-columns: repeat(2, 1fr);\n    }\n\n    @media (max-width: 575.98px) {\n      grid-template-columns: 1fr;\n    }\n  }\n"]);return In=function(){return n},n}var Nn=Object(u.d)(kn.a)(In(),(function(n){return"dark"===n.theme.mode?"rgba(0,0,0,.2)":"#08090a0d"}),(function(n){return"dark"===n.theme.mode?"#393a3b":"#08090a0d"})),Tn=u.d.div(Cn()),Sn=Object(u.d)(On.a)(wn(),(function(n){return"dark"===n.theme.mode?"#393a3b":"#f0f0f0"}),(function(n){return"dark"===n.theme.mode?"#242526":"#ffffff"}),(function(n){return"dark"===n.theme.mode?"#ffffffa6":"#8c8c8c"}),(function(n){return"dark"===n.theme.mode?"#ffffffa6":"#f0f0f0"})),_n=u.d.div(jn(),(function(n){return"dark"===n.theme.mode?"rgba(255,255,255,.4)":"rgba(0,0,0,.4)"})),An=t(119),Mn=t(187);function Yn(){var n=Object(j.a)(["\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  color: #f5222d;\n  font-size: 1.1rem;\n  letter-spacing: 0.2px;\n  background: ",";\n\n  .anticon-warning {\n    font-size: 2rem;\n    margin-bottom: 10px;\n  }\n"]);return Yn=function(){return n},n}function zn(){var n=Object(j.a)(["\n  height: 100%;\n\n  .ant-skeleton-header,\n  .ant-skeleton-avatar {\n    padding: 0;\n    height: 100%;\n    width: 100%;\n    border-radius: 4px;\n  }\n"]);return zn=function(){return n},n}function Rn(){var n=Object(j.a)(["\n  width: 100%;\n  height: 100%;\n\n  img {\n    width: 0;\n    height: 0;\n    object-fit: cover;\n    opacity: 0;\n    transition: 0.2s;\n    border-radius: 4px;\n  }\n\n  &.loaded img {\n    opacity: 1;\n    width: 100%;\n    height: 100%;\n  }\n"]);return Rn=function(){return n},n}var Dn=u.d.div(Rn()),Fn=Object(u.d)(Mn.a)(zn()),Ln=u.d.div(Yn(),(function(n){return"dark"===n.theme.mode?"rgba(255,255,255,.03)":"rgba(0,0,0,.03)"}));var Zn=function(){return a.a.createElement(Fn,{avatar:{shape:"square"},active:!0,loading:!0,paragraph:!1,title:!1})},Hn=t(194);var Pn=function(){return a.a.createElement(Ln,null,a.a.createElement(Hn.a,null),a.a.createElement("span",null,"Failed to load image"))};var Gn=function(n){var e=n.src,t=n.alt,o=n.onImageClick,c=Object(An.a)(n,["src","alt","onImageClick"]),i=Object(r.useState)(!0),u=Object(l.a)(i,2),d=u[0],s=u[1],m=Object(r.useState)(!1),f=Object(l.a)(m,2),p=f[0],g=f[1],b=Object(r.useRef)();Object(r.useEffect)((function(){var n=document.createElement("img");n.src=e,n.onload=h,n.onerror=v}),[e]);var h=function(){b&&b.current&&(b.current.src=e,g(!1),s(!1))},v=function(){g(!0),s(!1)};return a.a.createElement(Dn,{className:d||p?"":"loaded"},d&&a.a.createElement(Zn,null),p&&a.a.createElement(Pn,null),!p&&a.a.createElement("img",Object.assign({},c,{alt:t,ref:b,onClick:d?void 0:o,style:{cursor:!o||d||p?"auto":"pointer"}})))};var Un=function(n){var e=n.date,t=n.story,r=k().dispatch,o=function(n){return function(){window.open("https://otakusan.net/Cosplay/PictureDetail/".concat(n),"_blank")}};return a.a.createElement(Nn,{defaultActiveKey:[e],expandIcon:function(n){var e=n.isActive;return a.a.createElement(En.a,{rotate:e?90:0})}},a.a.createElement(Nn.Panel,{header:a.a.createElement(Tn,null,v()(e).format("DD/MM/YYYY")),key:e},t.length?t.map((function(n){var t,c,i=n.Id,l=n.ThumbUrl,u=n.Name,d=n.Url;return a.a.createElement(Sn,{key:i,hoverable:!0,cover:a.a.createElement(Gn,{src:l,alt:u,onImageClick:(c=i,function(){r({type:"ADD_STORY",payload:{id:c,date:e}})})}),actions:[a.a.createElement(xn.a,{key:"file",onClick:o(i)}),a.a.createElement(yn.a,{key:"download",onClick:(t=d,function(){var n=document.createElement("a");n.href=t,n.target="_blank",n.click()})})]})})):a.a.createElement(_n,null,"No images found")))};var Xn=function(){var n=k(),e=n.state,t=n.dispatch;Object(r.useEffect)((function(){c()}),[e.date]);var o=function(){var n=Object(en.a)(nn.a.mark((function n(e){var t,r;return nn.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch("".concat("https://service.otakuscan.net/api/cosplayservice/Cosplaybydate","?date=").concat(e));case 2:return t=n.sent,n.next=5,t.json();case 5:return r=n.sent,n.abrupt("return",{date:e,story:r});case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),c=function(){var n=Object(en.a)(nn.a.mark((function n(){var r,a,c,i;return nn.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r=0,a=e.date.clone(),c=[],n.prev=3,t({type:"FETCHING"});do{c.push(o((l=r?1:0,a.subtract(l,"days").format("YYYY-MM-DD")))),r++}while(7>r);return n.next=8,Promise.all(c);case 8:i=n.sent,t({type:"SET_STORIES",payload:i}),n.next=17;break;case 12:n.prev=12,n.t0=n.catch(3),t({type:"FETCH_FAILED"}),tn.a.destroy(),tn.a.error({message:"Error",description:"Something went wrong, please try again!"});case 17:case"end":return n.stop()}var l}),n,null,[[3,12]])})));return function(){return n.apply(this,arguments)}}();return e.error?null:e.loading?a.a.createElement(vn,null):a.a.createElement(an,null,e.stories.map((function(n){return a.a.createElement(Un,Object.assign({key:n.date},n))})))},Bn=t(184),qn=t(198),Jn=t(199),Kn=t(200);function Vn(){var n=Object(j.a)(["\n  position: fixed;\n  font-size: 1.3rem;\n  color: #fff;\n  width: 3rem;\n  height: 3rem;\n  z-index: 3090;\n  background: transparent;\n  line-height: 3rem;\n  text-align: center;\n  border-radius: 50%;\n  cursor: pointer;\n  transition: 0.2s;\n\n  &:hover {\n    background: #fff;\n    color: #000;\n  }\n\n  &.close {\n    top: 10px;\n    right: 10px;\n  }\n\n  &.next {\n    right: 12px;\n    top: 50%;\n    transform: translateY(-50%);\n  }\n\n  &.prev {\n    left: 12px;\n    top: 50%;\n    transform: translateY(-50%);\n  }\n"]);return Vn=function(){return n},n}var Qn=u.d.div(Vn());var Wn=function(){var n=Object(r.useState)(!1),e=Object(l.a)(n,2),t=e[0],o=e[1],c=k(),i=c.state,u=c.dispatch,d=i.story,s=i.currentImage,m=s.Name,f=s.Url,p=s.isFirstImage,g=s.isLastImage,b=s.idx;Object(r.useEffect)((function(){return window.addEventListener("keydown",E),function(){return window.removeEventListener("keydown",E)}}),[d,f]);var h=function(){u({type:"REMOVE_STORY"}),o(!1)},v=function(n){return function(){u({type:"CHANGE_CURRENT_IMAGE",payload:n})}},E=function(n){var e=n.code;(d.length||f)&&("ArrowLeft"!==e||p||v(-1)(),"ArrowRight"!==e||g||v(1)())};return a.a.createElement(a.a.Fragment,null,!!d.length&&a.a.createElement(a.a.Fragment,null,a.a.createElement(Qn,{className:"close",onClick:h},a.a.createElement(qn.a,null)),!p&&a.a.createElement(Qn,{className:"prev",onClick:v(-1)},a.a.createElement(Jn.a,null)),!g&&a.a.createElement(Qn,{className:"next",onClick:v(1)},a.a.createElement(Kn.a,null))),a.a.createElement(Bn.a,{closable:!1,visible:!!d.length,onCancel:h,centered:!0,destroyOnClose:!0,footer:null,width:t?"auto":600},!!f&&a.a.createElement(Gn,{key:b,src:f,alt:m,onImageClick:function(){o((function(n){return!n}))}})))};var $n=function(){return a.a.createElement(Y,null,a.a.createElement(G,null),a.a.createElement(U,null,a.a.createElement(W,null),a.a.createElement(Xn,null)),a.a.createElement(N.a,null),a.a.createElement(X,null),a.a.createElement(Wn,null))};i.a.initialize("UA-178421575-1"),i.a.pageview("/"),c.a.render(a.a.createElement(g,null,a.a.createElement(O,null,a.a.createElement(I,null),a.a.createElement($n,null))),document.getElementById("root"))}},[[122,1,2]]]);
//# sourceMappingURL=main.fc96d90e.chunk.js.map